import * as React from "react";
import IOpening from "../types/IOpening";
import {Button, Card, CardBody, CardHeader, Divider} from "@nextui-org/react";
import { card, header, body, galleryName, buttonGroup, button, svgContainer, eyeContainer, checkContainer} from './galleryCard.module.scss'
import { motion } from "framer-motion";
import { useLocalStorage } from "@uidotdev/usehooks";


const mapSVG = (
    <div className={svgContainer}>
    <svg  direction='ltr' xmlns='http://www.w3.org/2000/svg' version='1.1'>
        <g fill-rule='nonzero' transform='scale(1,-1) translate(0,-49.2421875)'>
            <path fill='black' stroke='black' fill-opacity='1.0' stroke-width='1.0' d='
    M 32.2265625,4.5546875
    C 32.763671875,4.5546875 33.34375,4.748046875 34.03125,5.15625
    L 44.859375,11.6015625
    C 45.58984375,12.03125 45.869140625,12.396484375 45.869140625,13.384765625
    L 45.869140625,42.216796875
    C 45.869140625,43.18359375 45.353515625,43.7421875 44.6015625,43.7421875
    C 44.279296875,43.7421875 43.935546875,43.591796875 43.5703125,43.419921875
    L 32.333984375,37.296875
    L 21.2265625,44.04296875
    C 20.474609375,44.47265625 19.765625,44.6875 19.078125,44.6875
    C 18.369140625,44.6875 17.66015625,44.47265625 16.9296875,44.04296875
    L 6.509765625,37.640625
    C 5.779296875,37.2109375 5.478515625,36.845703125 5.478515625,35.857421875
    L 5.478515625,7.025390625
    C 5.478515625,6.05859375 5.994140625,5.478515625 6.74609375,5.478515625
    C 7.068359375,5.478515625 7.43359375,5.650390625 7.77734375,5.84375
    L 19.013671875,12.203125
    L 30.421875,5.15625
    C 31.087890625,4.748046875 31.646484375,4.5546875 32.2265625,4.5546875
    Z
    M 31.732421875,5.7578125
    C 31.517578125,5.80078125 31.259765625,5.908203125 31.06640625,6.015625
    L 19.63671875,13.083984375
    L 19.63671875,43.65625
    C 19.8515625,43.61328125 20.087890625,43.505859375 20.28125,43.3984375
    L 31.732421875,36.416015625
    Z
    M 6.982421875,6.66015625
    C 6.724609375,6.66015625 6.53125,6.853515625 6.53125,7.154296875
    L 6.53125,35.685546875
    C 6.53125,36.201171875 6.66015625,36.56640625 7.197265625,36.8671875
    L 17.91796875,43.376953125
    C 18.1328125,43.505859375 18.34765625,43.61328125 18.583984375,43.65625
    L 18.583984375,13.10546875
    L 7.3046875,6.74609375
    C 7.197265625,6.681640625 7.08984375,6.66015625 6.982421875,6.66015625
    Z
    M 32.78515625,5.736328125
    L 32.78515625,36.39453125
    L 44.04296875,42.517578125
    C 44.171875,42.560546875 44.279296875,42.58203125 44.38671875,42.58203125
    C 44.623046875,42.58203125 44.81640625,42.388671875 44.81640625,42.087890625
    L 44.81640625,13.556640625
    C 44.81640625,13.041015625 44.6875,12.697265625 44.171875,12.396484375
    L 33.4296875,5.994140625
    C 33.21484375,5.88671875 33.0,5.779296875 32.78515625,5.736328125
    Z
'/>
        </g>
    </svg>
    </div>)

const eyeSVG = (
    <div className={eyeContainer}>
        <svg direction='ltr' xmlns='http://www.w3.org/2000/svg'
             version='1.1'>
            <g fill-rule='nonzero' transform='scale(1,-1) translate(0,-40.412109375)'>
                <path fill='black' stroke='black' fill-opacity='1.0' stroke-width='1.0' d='
    M 32.2265625,2.36328125
    C 48.296875,2.36328125 60.048828125,16.048828125 60.048828125,20.216796875
    C 60.048828125,24.384765625 48.146484375,38.048828125 32.2265625,38.048828125
    C 16.28515625,38.048828125 4.3828125,24.384765625 4.3828125,20.216796875
    C 4.3828125,16.048828125 16.134765625,2.36328125 32.2265625,2.36328125
    Z
    M 32.2265625,3.65234375
    C 16.671875,3.65234375 5.736328125,16.84375 5.736328125,20.216796875
    C 5.736328125,23.611328125 16.671875,36.802734375 32.2265625,36.802734375
    C 47.759765625,36.802734375 58.6953125,23.611328125 58.6953125,20.216796875
    C 58.6953125,16.84375 47.759765625,3.65234375 32.2265625,3.65234375
    Z
    M 32.2265625,8.228515625
    C 38.7578125,8.228515625 44.2578125,13.685546875 44.2578125,20.216796875
    C 44.2578125,26.876953125 38.7578125,32.205078125 32.2265625,32.205078125
    C 25.544921875,32.205078125 20.15234375,26.876953125 20.173828125,20.216796875
    C 20.23828125,13.685546875 25.544921875,8.228515625 32.2265625,8.228515625
    Z
    M 32.248046875,16.71484375
    C 30.271484375,16.71484375 28.66015625,18.26171875 28.66015625,20.216796875
    C 28.66015625,22.193359375 30.271484375,23.71875 32.248046875,23.71875
    C 34.181640625,23.71875 35.771484375,22.193359375 35.771484375,20.216796875
    C 35.771484375,18.26171875 34.181640625,16.71484375 32.248046875,16.71484375
    Z
'/>
            </g>
        </svg>
    </div>)


const checkSVG = (
    <div className={checkContainer}>
        <svg direction='ltr' xmlns='http://www.w3.org/2000/svg'
             version='1.1'>
            <g fill-rule='nonzero' transform='scale(1,-1) translate(0,-52.400390625)'>
                <path fill='black' stroke='black' fill-opacity='1.0' stroke-width='1.0' d='
    M 24.6640625,5.37109375
    C 36.115234375,5.37109375 45.482421875,14.73828125 45.482421875,26.2109375
    C 45.482421875,37.662109375 36.115234375,47.029296875 24.6640625,47.029296875
    C 13.212890625,47.029296875 3.845703125,37.662109375 3.845703125,26.2109375
    C 3.845703125,14.73828125 13.212890625,5.37109375 24.6640625,5.37109375
    Z
    M 24.6640625,6.423828125
    C 13.771484375,6.423828125 4.8984375,15.296875 4.8984375,26.2109375
    C 4.8984375,37.103515625 13.771484375,45.9765625 24.6640625,45.9765625
    C 35.578125,45.9765625 44.4296875,37.103515625 44.4296875,26.2109375
    C 44.4296875,15.296875 35.578125,6.423828125 24.6640625,6.423828125
    Z
    M 21.78515625,15.51171875
    C 22.0,15.51171875 22.21484375,15.576171875 22.365234375,15.833984375
    L 34.568359375,34.654296875
    C 34.654296875,34.783203125 34.697265625,34.93359375 34.697265625,35.0625
    C 34.697265625,35.44921875 34.375,35.685546875 34.095703125,35.685546875
    C 33.880859375,35.685546875 33.666015625,35.556640625 33.537109375,35.341796875
    L 21.763671875,17.166015625
    L 14.8671875,25.029296875
    C 14.716796875,25.22265625 14.544921875,25.287109375 14.30859375,25.287109375
    C 14.05078125,25.287109375 13.70703125,25.09375 13.70703125,24.685546875
    C 13.70703125,24.4921875 13.771484375,24.298828125 13.921875,24.1484375
    L 21.205078125,15.791015625
    C 21.419921875,15.5546875 21.5703125,15.51171875 21.78515625,15.51171875
    Z
'/>
            </g>
        </svg>

    </div>)


type GalleryCardProps = {
    opening: IOpening
    closeFn: () => void
}

const GalleryCard: React.FC<GalleryCardProps> = (props: GalleryCardProps) => {
    const [seen, saveSeen] = useLocalStorage<boolean>(props.opening.name + "/" + props.opening.date + "/" + props.opening.address, false);

    return (<motion.div initial={{opacity: 0, left: "40%"}} animate={{opacity: 100, left: "50%"}} exit={{opacity: 0,}}>
        <Card className={card + " bg-background/10"} isBlurred={true}>
            <CardHeader className={header}>
                <h2 className={galleryName}>{props.opening.name}</h2>
                <Button size={"sm"} radius={"full"} variant={"bordered"} onPress={props.closeFn}> Close </Button>
            </CardHeader>
            <Divider/>
            <CardBody className={body}>
                <p>{props.opening.address}</p>
                <p>{props.opening.description}</p>
                <div className={buttonGroup}>
                    <Button className={button} size={"sm"} radius={"full"} variant={seen ? "solid" : "bordered"}
                            onClick={() => {
                                saveSeen((!seen))
                            }}>{seen ? checkSVG : eyeSVG}Seen{seen ? "" : "?"}</Button>
                    <Button className={button} size={"sm"} radius={"full"} variant={"bordered"} onClick={() => {
                        window.open("https://www.google.com/maps/dir/?api=1&destination=" + props.opening.lat + "," + props.opening.long);
                    }}>{mapSVG}Directions</Button>
                </div>
            </CardBody>
        </Card></motion.div>)
}

export default GalleryCard